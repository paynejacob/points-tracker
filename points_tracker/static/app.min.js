(function(){'use strict'; angular.module('underscore',[]).factory('_',function(){return window._;});angular.module('moment',[]).factory('moment',function(){return window.moment;});angular.module('components',['underscore','moment']);

angular.module('points_tracker.services',['ngResource']);angular.module('points_tracker.controllers',[]);angular.module('points_tracker.filters',[]);angular.module('points_tracker',['components','ui.bootstrap','ui.router','angularFileUpload','flask-assets-templates','points_tracker.services','points_tracker.filters','points_tracker.controllers','toaster']);})();(function(){'use strict';angular.module('points_tracker').config(PointsConfig).run(PointsRun);PointsConfig.$inject=['$stateProvider','$urlRouterProvider','$resourceProvider'];function PointsConfig($stateProvider,$urlRouterProvider,$resourceProvider){$urlRouterProvider.otherwise("/"); $stateProvider.state('dashboard',{url:'/',templateUrl:'/static/partials/dashboard.html',}).state('audio-list',{url:'/audio-list',templateUrl:'/static/partials/audio-list.html',}).state('audio-upload',{url:'/audio-upload',templateUrl:'/static/partials/upload-audio.html',}); $resourceProvider.defaults.stripTrailingSlashes=false;}
PointsRun.$inject=['$rootScope'];function PointsRun($rootScope){ $rootScope._=_;$rootScope.$on('$stateChangeSuccess',function(event,toState,toParams,fromState,fromParams){
 $('html, body').animate({scrollTop:0},200);});}})();(function(){'use strict';angular.module('points_tracker.controllers').controller('AudioListCtrl',AudioListCtrl)
AudioListCtrl.$inject=['$scope','toaster','$log','$http','$timeout'];function AudioListCtrl($scope,toaster,$log,$http,$timeout){var self=this;self.searchQuery='';self.playing=0;self.uploadProgress=0;self.audio=[]
self.playAudio=function(id,length){console.log('called');$http.post('/play/'+id,{}).error(function(error){$log.error('audio failed to play: '+error);self.playing='error';}).success(function(audio){$log.log('played');self.playing=id;$log.log(length);$timeout(function(){self.playing=0;},length*1000+500);});};self.getAudioList=function(){$http({url:'/files/'+self.searchQuery,method:'GET',params:{limit:20}}).error(function(error){$log.error('Fetch audio list failed: '+error);}).success(function(audio){self.audio=audio;});};angular.element(document).ready(function(){self.getAudioList();});}})();(function(){'use strict';angular.module('points_tracker.controllers').controller('DashboardCtrl',DashboardCtrl)
DashboardCtrl.$inject=['$scope','toaster','$log'];function DashboardCtrl($scope,toaster,$log){var self=this;self.title="Welcome!"}})();(function(){'use strict';angular.module('points_tracker.controllers').controller('FlaskToasterCtrl',FlaskToasterCtrl);FlaskToasterCtrl.$inject=['$scope','toaster','$rootScope'];function FlaskToasterCtrl($scope,toaster,$rootScope){var self=this;var allMessages=[];var allCategories=[];$('.flask-message').each(function(i,obj){allMessages.push(obj.innerHTML)});$('.flask-category').each(function(i,obj){allCategories.push(obj.innerHTML)});for(var i in allMessages){toaster.pop(allCategories[i],allMessages[i]);}}})();(function(){'use strict';angular.module('points_tracker.controllers').controller('AudioUploadCtrl',AudioUploadCtrl)
AudioUploadCtrl.$inject=['$scope','toaster','$log','FileUploader','$http'];function AudioUploadCtrl($scope,toaster,$log,FileUploader,$http){var self=this;$scope.master={tags:"",name:""};$scope.audio=angular.copy($scope.master);$scope.uploader=$scope.uploader=new FileUploader({url:'/files/'});$scope.uploading=false;$scope.submit=function(audio){if($scope.audioUploadForm.$valid){if($scope.uploader.queue.length===0){toaster.pop('error',"Audio File","The audio file is required");return}
$scope.uploading=true;$scope.uploader.onBeforeUploadItem=function(item){ item.formData.push({audioName:audio.name,audioTags:audio.tags})
console.info('onBeforeUploadItem',item);};$scope.uploader.uploadAll();$scope.uploader.onCompleteAll=function(value){return};}
$scope.master=angular.copy(audio);};}})();(function(){'use strict';angular.module('points_tracker.controllers').filter('formatAudioLength',formatAudioLength)
function formatAudioLength(){return function(input){var mins=Math.floor(input/60);var sec=input-mins*60;sec=(sec<10)?'0'+sec:sec
mins=(mins<10)?'0'+mins:mins
return mins+':'+sec;};}})();