<div ng-controller="LightsCtrl">
  <div class="row">
    <section class="lights col-xs-12">
      <h2><i class="fa fa-lightbulb-o"></i> Lights</h2>
      <div class="panel panel-default" ng-repeat="(key, light) in lights" ng-class="{disabled:!light.state.reachable}">
        <div class="panel-heading">
          <h3 class="panel-title">
            <i class="fa fa-lightbulb-o"></i> {{light.name}} ({{key}})
            <i class="fa fa-warning pull-right" ng-if="!light.state.reachable"></i>
          </h3>
        </div>
        <div class="panel-body">
          <div class="btn-group btn-toggle">
            <button class="btn btn-sm" ng-click="setLightStateOn(key, true)" ng-class="{active:light.state.on, 'btn-default':!light.state.on, 'btn-primary':light.state.on}">ON</button>
            <button class="btn btn-sm" ng-click="setLightStateOn(key, false)" ng-class="{active:!light.state.on, 'btn-default':light.state.on, 'btn-primary':!light.state.on}">OFF</button>
          </div>
        </div>
        <ul class="list-group">
          <li class="list-group-item">
            <h4>
              Brightness
            </h4>
            <p>
              <slider ng-model="light.state.bri" min="0" max="255" step="1" value="light.state.bri" ng-change="changeBrightness(key, light.state.bri)"></slider>
            </p>
          </li>
          <li class="list-group-item">
            <h4>
              Alert
            </h4>
            <p>
              <button class="btn btn-sm btn-default" ng-click="triggerAlert(key, 'none')">none</button>
              <button class="btn btn-sm btn-default" ng-click="triggerAlert(key, 'select')">select</button>
              <button class="btn btn-sm btn-default" ng-click="triggerAlert(key, 'lselect')">lselect</button>
            </p>
          </li>
          <li class="list-group-item">
            <h4>
              Effect
            </h4>
            <p>
            <div class="btn-group btn-toggle">
              <button class="btn btn-sm" ng-click="setEffect(key, 'none')" ng-class="{'active btn-primary':light.state.effect=='none', 'btn-default':light.state.effect!='none'}">None</button>
              <button class="btn btn-sm" ng-click="setEffect(key, 'colorloop')" ng-class="{'active btn-primary':light.state.effect=='colorloop', 'btn-default':light.state.effect!='colorloop'}">Colorloop</button>
            </div>
            </p>
          </li>
        </ul>
      </div>
    </section>
  </div>
</div>
